var N=Object.defineProperty,g=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var x=(e,t,u)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,h=(e,t)=>{for(var u in t||(t={}))y.call(t,u)&&x(e,u,t[u]);if(w)for(var u of w(t))O.call(t,u)&&x(e,u,t[u]);return e},f=(e,t)=>g(e,B(t));import{j as p,r as b,c as k,R as S,a as V}from"./vendor.9e3bca73.js";const v=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function u(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=u(r);fetch(r.href,i)}};v();const n=p.exports.jsx,a=p.exports.jsxs,E=p.exports.Fragment;function T({title:e,task:t}){return a("section",{id:"article",className:"bg-white text-black text-opacity-70 rounded-2xl shadow-xl p-8",children:[n("h6",{className:"text-md font-black",children:e}),t()]})}function j({title:e="Answer:",children:t}){return a("section",{id:"article",className:"bg-white text-black text-opacity-70 rounded-2xl shadow-xl p-8",children:[n("h6",{className:"text-md font-black",children:e}),n("div",{className:"w-full p-4 text-black bg-slate-100 rounded-md outline-none my-2 text-opacity-70 text-sm  h-fit",disabled:!0,children:t})]})}var c={Question:T,Anwser:j};const L=(e,t=()=>{})=>Object.keys(e).map(u=>t(e,u));function P(e,t){if(!t)throw Error("Please type token of CWB");return async function(u,s){const r=new URLSearchParams({Authorization:t}),i=s?L(s,(l,m)=>`&${m}=${l[m].join(",")}`):"";return fetch(e+u+`?${r}`+i).then(l=>l.json())}}const M=P("https://opendata.cwb.gov.tw/api/v1/rest/datastore/","CWB-E8AC8336-9346-4D8A-A2D4-EB1934B7C25D");function F(e,t){const[u,s]=b.exports.useState(null),r=b.exports.useCallback(async()=>{const i=await M(e,t);s(i.records)},[]);return b.exports.useEffect(r,[r]),u}function I(e,t,u){return Q(t,u).slice(0,e)}function A(e,t,u=null){return t.reduce(e,u)}function Q(e,t){return t.sort(e)}const $=(e,t)=>e(t);class D{constructor({locationName:t,lat:u,lon:s,weatherElement:r,time:i,parameter:l}){this.name=t,this.geoLocation={lat:u,lon:s},this.distriction=l.reduce((m,o)=>f(h({},m),{[o.parameterName]:o.parameterValue}),{}),this.weather=r.reduce((m,o)=>f(h({},m),{[o.elementName]:o.elementValue}),{}),this.time=i}get info(){return h({},this)}}function R(e){const t=A((u,s)=>{if(u!==null){const r=s.weatherElement[0].elementValue,i=u.weatherElement[0].elementValue;return Number(r)===-99?u:Number(r)<Number(i)?s:u}return s},e.location);return new D(t)}function q(){const e=F("O-A0001-001",{elementName:["TEMP"]});if(!e)return n("div",{children:"loading"});const t=R(e);return a(E,{children:[n(c.Question,{title:"\u984C\u76EE\u4E00:",task:()=>a(E,{children:["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA",n("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),n("span",{className:"bg-blue-900 text-white",children:"\u884C\u653F\u5340"}),n("span",{className:"bg-blue-900 text-white",children:"\u6E2C\u7AD9\u540D\u7A31"}),n("span",{className:"bg-blue-900 text-white",children:"\u6EAB\u5EA6"}),n("span",{className:"bg-blue-900 text-white",children:"\u5EA7\u6A19"}),n("small",{className:"block",children:"(\u900F\u904E\u4E2D\u592E\u6C23\u8C61\u5C40\uFF21\uFF30\uFF29\u53D6\u5F97\u5168\u53F0\u6E2C\u7AD9\u5373\u6642\u8CC7\u6599)"}),n("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]})}),n(c.Anwser,{title:"\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE",children:JSON.stringify(t)})]})}const J=(e,t)=>{const u=Math.ceil(t.weatherElement[0].elementValue/500)*500,s=`${u-500}-${u}`;return e.hasOwnProperty(s)?f(h({},e),{[s]:[...e[s],t]}):f(h({},e),{[s]:[t]})};function U(e){return $(s=>Object.entries(s).map(([i,l])=>[i,A((o,d)=>d.weatherElement[1].elementValue<o.weatherElement[1].elementValue?d:o,l,l[0])]),A(J,e,{}))}function W(){const e=F("O-A0001-001",{elementName:["ELEV","TEMP"]});if(!e)return n("div",{children:"loading"});const u=U((s=>s.filter(r=>Number(r.weatherElement[1].elementValue)!==-99))(e.location));return a(E,{children:[n(c.Question,{title:"\u984C\u76EE\u4E8C:",task:()=>a(E,{children:["\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF",n("span",{className:"bg-blue-900 text-white",children:"500m"}),"\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3object",n("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]})}),u.map(([s,r])=>n(c.Anwser,{title:s,children:n("span",{children:JSON.stringify(new D(r))})}))]})}const H=(e,t)=>Number(t.weatherElement[0].elementValue)-Number(e.weatherElement[0].elementValue),X=(e,t)=>{const u=t.parameter[0].parameterValue;return e.hasOwnProperty(u)?f(h({},e),{[u]:[...e[u],t]}):h({[u]:[t]},e)};function _(){const e=F("O-A0002-001",{elementName:["HOUR_24"]});if(!e)return n("div",{children:"loading"});const t=I(20,H,e.location),u=t.map(i=>a("div",{children:[i.locationName,": ",i.weatherElement[0].elementValue]})),s=A(X,t,{}),r=Object.keys(s).map(i=>a("div",{children:[i,": ",s[i].length]}));return a(E,{children:[n(c.Question,{title:"\u984C\u76EE\u4E09:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",task:()=>a(E,{children:["\u8FD1",n("span",{className:"bg-blue-900 text-white",children:"24\u5C0F\u6642"}),"\u964D\u96E8\u91CF",n("span",{className:"bg-blue-900 text-white",children:"\u524D20\u540D"}),"\u662F\u54EA\u4E9B\uFF1F",n("br",{}),"\u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B",n("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),"\uFF1F",n("small",{className:"block",children:"HOUR_24\u6B04\u4F4D\u70BA\u8FD124\u5C0F\u6642\u7684\u7D2F\u7A4D\u964D\u96E8\u91CF"}),n("small",{className:"block",children:"(API: /v1/rest/datastore/O-A0002-001)"})]})}),n(c.Anwser,{title:"\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D:",children:u}),n(c.Anwser,{title:"\u524D20\u540D\u5206\u4F48\u65BC:",children:r})]})}function K(e){return function(t){return e.location.find(u=>u.locationName===t)}}function z(){const e=F("F-D0047-051",{elementName:["MaxT","MinT"]});if(!e)return n("div",{children:"loading"});const u=K(e.locations[0])("\u5B89\u6A02\u5340"),s=u.weatherElement[0].time,r=u.weatherElement[1].time,i=Math.min(...s.map(d=>d.elementValue[0].value)),l=Math.max(...r.map(d=>d.elementValue[0].value)),m=r.map((d,C)=>d.elementValue[0].value-s[C].elementValue[0].value),o=Math.max(...m);return a(E,{children:[n(c.Question,{title:"\u984C\u76EE\u56DB:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",task:()=>a(E,{children:["\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02-\u9109\u93AE\uFF0C\u672A\u4F86\u4E00\u9031\u7684",n("span",{className:"bg-blue-900 text-white",children:"\u6700\u4F4E\u6EAB"}),"\u8207",n("span",{className:"bg-blue-900 text-white",children:"\u6700\u9AD8\u6EAB"}),"\u5206\u5225\u70BA\u591A\u5C11\uFF1F",n("br",{}),"\u4E14",n("span",{className:"bg-blue-900 text-white",children:"\u55AE\u65E5\u6EAB\u5DEE"}),"\u6700\u5927\u70BA\u591A\u5C11\uFF1F",n("small",{className:"block",children:"(API: \u200B/v1\u200B/rest\u200B/datastore\u200B/F-D0047-00XX\u7CFB\u5217)"})]})}),n(c.Anwser,{title:"\u672A\u4F86\u4E00\u9031\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB:",children:`\u6700\u4F4E\u6EAB:${i}\xB0C
\u6700\u9AD8\u6EAB:${l}\xB0C`}),n(c.Anwser,{title:"\u55AE\u65E5\u6EAB\u5DEE\u6700\u5927\u70BA:",children:`${o}\xB0C`})]})}function G(){return n("div",{className:"App",children:a("main",{className:k("flex flex-col","w-screen max-w-3xl","mx-auto my-16 space-y-6"),children:[n("h4",{className:"text-2xl font-black",children:"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566"}),n(q,{}),n(W,{}),n(_,{}),n(z,{})]})})}S.render(n(V.StrictMode,{children:n(G,{})}),document.getElementById("root"));
