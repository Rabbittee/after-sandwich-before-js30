var j=Object.defineProperty,k=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var D=(t,e,n)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e)=>{for(var n in e||(e={}))R.call(e,n)&&D(t,n,e[n]);if(C)for(var n of C(e))V.call(e,n)&&D(t,n,e[n]);return t},p=(t,e)=>k(t,L(e));import{j as F,c as x,r as E,R as M,a as S}from"./vendor.2c825550.js";const I=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};I();const u=F.exports.jsx,l=F.exports.jsxs,b=F.exports.Fragment;function y({title:t,children:e}){return l("section",{className:"bg-white text-black text-opacity-70 rounded-2xl shadow-xl p-8",children:[u("h6",{className:"text-md font-black",children:t}),e]})}function _({title:t,children:e}){return u(y,{title:t,children:e})}function Q({title:t="Answer:",className:e,children:n}){return u(y,{title:t,children:u("div",{className:"w-full p-4 text-black bg-slate-100 rounded-md outline-none my-2 text-opacity-70 text-sm  h-fit",children:u("div",{className:x("w-full h-full bg-cover rounded-md",e),children:u("div",{className:"rounded-md overflow-hidden filter backdrop-blur-sm flex flex-col gap-y-2 px-4 py-2 text-slate-200 bg-slate-600 bg-opacity-40",children:n})})})})}var m={Question:_,Answer:Q};const $="CWB-E8AC8336-9346-4D8A-A2D4-EB1934B7C25D";function W(t,e){if(!e)throw Error("Please type token of CWB");return async function(n,i){const s=new URLSearchParams(d({Authorization:e},i));return fetch(t+n+`?${s}`).then(r=>r.json())}}const T=W("https://opendata.cwb.gov.tw/api",$),B=(...t)=>e=>t.reduce((n,i)=>i(n),e),f=t=>e=>e.reduce(t),U=(t,e)=>n=>n.sort(e).slice(0,t),O=(t,e)=>{if(t!==null){const n=e.weather.TEMP,i=t.weather.TEMP;return Number(n)<Number(i)?e:t}return e};class q{constructor({locationName:e,lat:n,lon:i,weatherElement:s,time:r,parameter:c}){this.name=e,this.geoLocation={lat:n,lon:i},this.district=c.reduce((o,a)=>p(d({},o),{[a.parameterName]:["TOWN_SN","CITY_SN"].includes(a.parameterName)?Number(a.parameterValue):a.parameterValue}),{}),this.weather=s.reduce((o,a)=>p(d({},o),{[a.elementName]:Number(a.elementValue)}),{}),this.time=r}}class H{constructor({locationName:e,lat:n,lon:i,weatherElement:s,time:r,parameter:c}){this.name=e,this.geoLocation={lat:n,lon:i},this.weather=s.reduce((o,a)=>p(d({},o),{[a.elementName]:{description:a.description,time:a.time}}),{}),this.time=r}}function N(t,e){const[n,i]=E.exports.useState(null);return E.exports.useEffect(()=>{T(t,e).then(s=>s.records.location.map(r=>new q(r))).then(s=>s.filter(r=>Number(r.weather.TEMP)!==-99)).then(s=>i(s))},[]),n}function Y(t,e){const[n,i]=E.exports.useState(null);return E.exports.useEffect(()=>{T(t,e).then(s=>s.records.locations[0].location.map(r=>new H(r))).then(s=>s.filter(r=>Number(r.weather.TEMP)!==-99)).then(s=>i(s))},[]),n}function g({title:t,children:e}){return l("fieldset",{className:"border rounded-md px-4 py-2",children:[u("legend",{className:x("text-lg font-bold",{"px-2":t}),children:t}),e]})}function A({title:t,temp:e,time:n}){return u(g,{title:t,children:l("div",{className:"flex items-end",children:[l("section",{children:[u("span",{className:"text-2xl font-bold",children:e}),u("span",{className:"text-sm",children:"\xB0C"})]}),u("span",{className:"ml-auto",children:n})]})})}function v({type:t,name:e,district:n,elevation:i,temp:s,time:r}){return u(g,{title:t,children:l("div",{className:"flex flex-col",children:[l("div",{children:[u("span",{className:"text-lg font-bold font-lg",children:e}),l("span",{className:"text-sm font-bold font-lg ml-2",children:[i,"\u516C\u5C3A"]})]}),l("section",{className:"flex flex-row",children:[l("div",{children:[l("div",{className:"text-sm",children:[" ",n]}),l("div",{children:["\u6642\u9593: ",r]})]}),l("div",{className:"text-4xl ml-auto",children:[u("span",{children:s}),u("span",{className:"text-lg",children:"\xB0C"})]})]})]})})}function J(){const t=N("/v1/rest/datastore/O-A0001-001",{elementName:["TEMP","ELEV"]});if(!t)return u("div",{children:"loading"});const e=f(O),{name:n,district:i,weather:s,time:r}=e(t);return l(b,{children:[l(m.Question,{title:"\u984C\u76EE\u4E00:",children:["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),u("span",{className:"bg-blue-900 text-white",children:"\u884C\u653F\u5340"}),u("span",{className:"bg-blue-900 text-white",children:"\u6E2C\u7AD9\u540D\u7A31"}),u("span",{className:"bg-blue-900 text-white",children:"\u6EAB\u5EA6"}),u("span",{className:"bg-blue-900 text-white",children:"\u5EA7\u6A19"}),u("small",{className:"block",children:"(\u900F\u904E\u4E2D\u592E\u6C23\u8C61\u5C40\uFF21\uFF30\uFF29\u53D6\u5F97\u5168\u53F0\u6E2C\u7AD9\u5373\u6642\u8CC7\u6599)"}),u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(m.Answer,{title:"\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE",className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:u(v,{name:n,elevation:s.ELEV,district:`${i.CITY} ${i.TOWN}`,temp:s.TEMP,time:r.obsTime})})]})}const K=(t,e)=>{const n=Math.ceil(e.weather.ELEV/500)*500,i=`${n-500}-${n}`;return t.hasOwnProperty(i)?(t[i].push(e),t):p(d({},t),{[i]:[e]})};function z(){const t=N("/v1/rest/datastore/O-A0001-001",{elementName:["ELEV","TEMP"]});if(!t)return u("div",{children:"loading"});const e=f(O),r=B(o=>o.sort((a,h)=>a.weather.ELEV-h.weather.ELEV),o=>o.reduce(K,{}),o=>Object.keys(o).reduce((a,h)=>p(d({},a),{[h]:e(o[h])}),{}))(t),c=Object.keys(r).map(o=>{const{name:a,district:h,weather:w,time:P}=r[o];return u("li",{children:u(v,{type:o,name:a,elevation:w.ELEV,district:`${h.CITY} ${h.TOWN}`,temp:w.TEMP,time:P.obsTime})})});return l(b,{children:[l(m.Question,{title:"\u984C\u76EE\u4E8C:",children:["\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF",u("span",{className:"bg-blue-900 text-white",children:"500m"}),"\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3object",u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(m.Answer,{className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:u("ul",{children:c})})]})}const G=(t,e)=>{const n=e.district.CITY;return t.hasOwnProperty(n)?(t[n].push(e),t):d({[n]:[e]},t)};function X({name:t,weather:e}){return u("li",{children:l("div",{className:"shadow-md rounded-md p-2 flex flex-col justify-center items-center bg-white bg-opacity-20",children:[u("h2",{className:"text-md font-bold px-2",children:t}),l("div",{className:"w-full flex justify-center items-end",children:[u("span",{className:"text-base font-bold",children:e.HOUR_24}),u("span",{className:"ml-1",children:"\u6BEB\u7C73"})]})]})})}function Z({name:t,stations:e}){return u("li",{children:u(g,{title:t,children:u("ul",{className:"flex flex-row flex-wrap gap-x-2 gap-y-4",children:e.map(X)})})})}function ee(){const t=N("/v1/rest/datastore/O-A0002-001",{elementName:["HOUR_24"]});if(!t)return u("div",{children:"loading"});const i=U(20,(r,c)=>c.weather.HOUR_24-r.weather.HOUR_24)(t).reduce(G,{}),s=Object.keys(i).map(r=>u(Z,{name:r,stations:i[r]}));return l(b,{children:[l(m.Question,{title:"\u984C\u76EE\u4E09:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u8FD1",u("span",{className:"bg-blue-900 text-white",children:"24\u5C0F\u6642"}),"\u964D\u96E8\u91CF",u("span",{className:"bg-blue-900 text-white",children:"\u524D20\u540D"}),"\u662F\u54EA\u4E9B\uFF1F",u("br",{}),"\u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),"\uFF1F",u("small",{className:"block",children:"HOUR_24\u6B04\u4F4D\u70BA\u8FD124\u5C0F\u6642\u7684\u7D2F\u7A4D\u964D\u96E8\u91CF"}),u("small",{className:"block",children:"(API: /v1/rest/datastore/O-A0002-001)"})]}),u(m.Answer,{title:"\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D:",className:"bg-[url('/src/assets/images/q3_bg.jpeg')]",children:u("ul",{children:s})})]})}const te=t=>t.reduce((e,n)=>{const i=n.dataTime.slice(0,10),s=Number(n.elementValue[0].value);return e.hasOwnProperty(i)?(e[i].push(s),e):p(d({},e),{[i]:[s]})},{}),ue=t=>t.map(([e,n])=>({date:e,diffTemp:Math.max(...n)-Math.min(...n)})),ne=t=>f((e,n)=>e.diffTemp<n.diffTemp?n:e)(t);function se(){const t=Y("/v1/rest/datastore/F-D0047-089",{locationName:["\u57FA\u9686\u5E02"],elementName:["T"]});if(!t)return u("div",{children:"loading"});const e=t[0].weather.T.time,n=f((r,c)=>r.elementValue[0].value>c.elementValue[0].value?r:c)(e),i=f((r,c)=>r.elementValue[0].value<c.elementValue[0].value?r:c)(e),s=B(te,Object.entries,ue,ne)(e);return l(b,{children:[l(m.Question,{title:"\u984C\u76EE\u56DB:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u4F4E\u6EAB"}),"\u8207",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u9AD8\u6EAB"}),"\u5206\u5225\u70BA\u591A\u5C11\uFF1F",u("br",{}),"\u4E14",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE"}),"\u70BA\u591A\u5C11\uFF1F",u("small",{className:"block",children:"(API: /v1/rest/datastore/F-D0047-089)"})]}),l(m.Answer,{title:"\u672A\u4F86\u4E00\u9031\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB:",className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:[u(A,{title:"\u6700\u4F4E\u6EAB",temp:i.elementValue[0].value,time:i.dataTime}),u(A,{title:"\u6700\u9AD8\u6EAB",temp:n.elementValue[0].value,time:n.dataTime}),u(A,{title:"\u55AE\u65E5\u6EAB\u5DEE\u6700\u5927",temp:s.diffTemp,time:s.date})]})]})}function re(){return u("div",{className:"App",children:l("main",{className:x("flex flex-col","w-screen max-w-3xl","mx-auto my-16 space-y-6"),children:[u("h4",{className:"text-2xl font-black",children:"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566"}),u(J,{}),u(z,{}),u(ee,{}),u(se,{})]})})}M.render(u(S.StrictMode,{children:u(re,{})}),document.getElementById("root"));
