var P=Object.defineProperty,S=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var C=(t,e,s)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var s in e||(e={}))k.call(e,s)&&C(t,s,e[s]);if(w)for(var s of w(e))L.call(e,s)&&C(t,s,e[s]);return t},m=(t,e)=>S(t,j(e));import{j as F,c as N,r as p,R as I,a as M}from"./vendor.2c825550.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}};R();const u=F.exports.jsx,a=F.exports.jsxs,f=F.exports.Fragment;function D({title:t,children:e}){return a("section",{className:"bg-white text-black text-opacity-70 rounded-2xl shadow-xl p-8",children:[u("h6",{className:"text-md font-black",children:t}),e]})}function $({title:t,children:e}){return u(D,{title:t,children:e})}function _({title:t="Answer:",className:e,children:s}){return u(D,{title:t,children:u("div",{className:"w-full p-4 text-black bg-slate-100 rounded-md outline-none my-2 text-opacity-70 text-sm  h-fit",children:u("div",{className:N("w-full h-full bg-cover rounded-md",e),children:u("div",{className:"rounded-md overflow-hidden filter backdrop-blur-sm flex flex-col gap-y-2 px-4 py-2 text-slate-200 bg-slate-600 bg-opacity-40",children:s})})})})}var c={Question:$,Answer:_};const V="CWB-E8AC8336-9346-4D8A-A2D4-EB1934B7C25D",Q="https://opendata.cwb.gov.tw/api";function J(t){if(!t)throw Error("Please type token of CWB");return async function(e,s){const n=new URLSearchParams(d({Authorization:t},s));return fetch(`${Q}${e}${n?"?":""}${n}`).then(r=>r.json())}}const B=J(V),A=(...t)=>e=>t.reduce((s,n)=>n(s),e),E=t=>e=>e.reduce(t),U=(t,e)=>s=>s.sort(e).slice(0,t),h=t=>JSON.stringify(t,null,"    ").split(`
`).map(s=>u("pre",{children:s},s)),y=(t,e)=>e.weather.TEMP<t.weather.TEMP?e:t;function W({locationName:t,lat:e,lon:s,weatherElement:n,time:r,parameter:l}){this.name=t,this.geoLocation={lat:Number(e),lon:Number(s)},this.district=l.reduce((i,o)=>m(d({},i),{[o.parameterName]:["TOWN_SN","CITY_SN"].includes(o.parameterName)?Number(o.parameterValue):o.parameterValue}),{}),this.weather=n.reduce((i,o)=>m(d({},i),{[o.elementName]:Number(o.elementValue)}),{}),this.time=r.obsTime}function q({locationName:t,lat:e,lon:s,weatherElement:n}){this.name=t,this.geoLocation={lat:Number(e),lon:Number(s)},this.weather=n.reduce((r,l)=>m(d({},r),{[l.elementName]:{description:l.description,time:l.time.map(({dataTime:i,elementValue:o})=>({dataTime:i,value:Number(o[0].value),measures:o[0].measures}))}}),{})}const H={noData:-99},T=t=>e=>e.map(s=>new t(s)),O=t=>t.filter(e=>e.weather.TEMP!==H.noData);function b(t,e){const[s,n]=p.exports.useState(null);return p.exports.useEffect(()=>{B(t,e).then(r=>r.records.location).then(T(W)).then(O).then(n)},[]),s}function Y(t,e){const[s,n]=p.exports.useState(null);return p.exports.useEffect(()=>{B(t,e).then(r=>r.records.locations[0].location).then(T(q)).then(O).then(n)},[]),s}function x({title:t,children:e}){return a("fieldset",{className:"border rounded-md px-4 py-2",children:[u("legend",{className:N("text-lg font-bold",{"px-2":t}),children:t}),e]})}function g({title:t,temp:e,time:s}){return u(x,{title:t,children:a("div",{className:"flex items-end",children:[a("section",{children:[u("span",{className:"text-2xl font-bold",children:e}),u("span",{className:"text-sm",children:"\xB0C"})]}),u("span",{className:"ml-auto",children:s})]})})}function v({type:t,name:e,district:s,elevation:n,temp:r,time:l}){return u(x,{title:t,children:a("div",{className:"flex flex-col",children:[a("div",{children:[u("span",{className:"text-lg font-bold font-lg",children:e}),a("span",{className:"text-sm font-bold font-lg ml-2",children:[n,"\u516C\u5C3A"]})]}),a("section",{className:"flex flex-row",children:[a("div",{children:[a("div",{className:"text-sm",children:[" ",s]}),a("div",{children:["\u6642\u9593: ",l]})]}),a("div",{className:"text-4xl ml-auto",children:[u("span",{children:r}),u("span",{className:"text-lg",children:"\xB0C"})]})]})]})})}function K(){const t=b("/v1/rest/datastore/O-A0001-001",{elementName:["TEMP","ELEV"]});if(!t)return u("div",{children:"loading"});const e=E(y),{name:s,district:n,weather:r,time:l}=e(t);return a(f,{children:[a(c.Question,{title:"\u984C\u76EE\u4E00:",children:["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),u("span",{className:"bg-blue-900 text-white",children:"\u884C\u653F\u5340"}),u("span",{className:"bg-blue-900 text-white",children:"\u6E2C\u7AD9\u540D\u7A31"}),u("span",{className:"bg-blue-900 text-white",children:"\u6EAB\u5EA6"}),u("span",{className:"bg-blue-900 text-white",children:"\u5EA7\u6A19"}),u("small",{className:"block",children:"(\u900F\u904E\u4E2D\u592E\u6C23\u8C61\u5C40\uFF21\uFF30\uFF29\u53D6\u5F97\u5168\u53F0\u6E2C\u7AD9\u5373\u6642\u8CC7\u6599)"}),u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(c.Answer,{title:"\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE",className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:u(v,{name:s,elevation:r.ELEV,district:`${n.CITY} ${n.TOWN}`,temp:r.TEMP,time:l})}),u(c.Answer,{title:"\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE JSON",className:"bg-slate-900",children:h({name:s,district:n,weather:r,time:l})})]})}const G=t=>t.reduce((e,s)=>{const n=Math.ceil(s.weather.ELEV/500)*500,r=`${n-500}-${n}`;return e.hasOwnProperty(r)?(e[r].push(s),e):m(d({},e),{[r]:[s]})},{}),X=t=>t.sort((e,s)=>e.weather.ELEV-s.weather.ELEV),Z=t=>Object.keys(t).reduce((e,s)=>m(d({},e),{[s]:E(y)(t[s])}),{});function z(){const t=b("/v1/rest/datastore/O-A0001-001",{elementName:["ELEV","TEMP"]});if(!t)return u("div",{children:"loading"});const e=A(X,G,Z)(t),s=Object.keys(e).map(n=>{const{name:r,district:l,weather:i,time:o}=e[n];return u("li",{children:u(v,{type:n,name:r,elevation:i.ELEV,district:`${l.CITY} ${l.TOWN}`,temp:i.TEMP,time:o})},n)});return a(f,{children:[a(c.Question,{title:"\u984C\u76EE\u4E8C:",children:["\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF",u("span",{className:"bg-blue-900 text-white",children:"500m"}),"\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3object",u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(c.Answer,{title:"\u6BCF500\u516C\u5C3A\u6700\u4F4E\u6EAB",className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:u("ul",{children:s})}),u(c.Answer,{title:"\u6BCF500\u516C\u5C3A\u6700\u4F4E\u6EAB JSON",className:"bg-slate-900",children:u("div",{className:" max-h-96 overflow-y-scroll",children:h(e)})})]})}const ee=U(20,(t,e)=>e.weather.HOUR_24-t.weather.HOUR_24),te=t=>t.reduce((e,s)=>{const n=s.district.CITY;return e.hasOwnProperty(n)?(e[n].push(s),e):d({[n]:[s]},e)},{});function ue({name:t,weather:e}){return u("li",{children:a("div",{className:"shadow-md rounded-md p-2 flex flex-col justify-center items-center bg-white bg-opacity-20",children:[u("h2",{className:"text-md font-bold px-2",children:t}),a("div",{className:"w-full flex justify-center items-end",children:[u("span",{className:"text-base font-bold",children:e.HOUR_24}),u("span",{className:"ml-1",children:"\u6BEB\u7C73"})]})]})},t)}function se({name:t,stations:e}){return u("li",{children:u(x,{title:t,children:u("ul",{className:"flex flex-row flex-wrap gap-x-2 gap-y-4",children:e.map((s,n)=>u(ue,{name:s.name,weather:s.weather},`${s.name}-${n}`))})})})}function ne(){const t=b("/v1/rest/datastore/O-A0002-001",{elementName:["HOUR_24"]});if(!t)return u("div",{children:"loading"});const e=A(ee,te)(t),s=Object.keys(e).map(n=>u(se,{name:n,stations:e[n]},n));return a(f,{children:[a(c.Question,{title:"\u984C\u76EE\u4E09:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u8FD1",u("span",{className:"bg-blue-900 text-white",children:"24\u5C0F\u6642"}),"\u964D\u96E8\u91CF",u("span",{className:"bg-blue-900 text-white",children:"\u524D20\u540D"}),"\u662F\u54EA\u4E9B\uFF1F",u("br",{}),"\u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),"\uFF1F",u("small",{className:"block",children:"HOUR_24\u6B04\u4F4D\u70BA\u8FD124\u5C0F\u6642\u7684\u7D2F\u7A4D\u964D\u96E8\u91CF"}),u("small",{className:"block",children:"(API: /v1/rest/datastore/O-A0002-001)"})]}),u(c.Answer,{title:"\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D:",className:"bg-[url('/src/assets/images/q3_bg.jpeg')]",children:u("ul",{children:s})}),u(c.Answer,{title:"\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D JSON",className:"bg-slate-900",children:u("div",{className:" max-h-96 overflow-y-scroll",children:h(e)})})]})}const re=t=>t.reduce((e,s)=>{const n=s.dataTime.substring(0,10);return console.log(n),e.hasOwnProperty(n)?(e[n].push(s.value),e):m(d({},e),{[n]:[s.value]})},{}),le=t=>t.map(([e,s])=>({date:e,diffTemp:Math.max(...s)-Math.min(...s)})),ae=E((t,e)=>t.diffTemp>e.diffTemp?t:e);function ie(){const t=Y("/v1/rest/datastore/F-D0047-089",{locationName:["\u57FA\u9686\u5E02"],elementName:["T"]});if(!t)return u("div",{children:"loading"});const e=t[0].weather.T.time,s=E((l,i)=>l.value>i.value?l:i)(e),n=E((l,i)=>l.value<i.value?l:i)(e),r=A(re,Object.entries,le,ae)(e);return a(f,{children:[a(c.Question,{title:"\u984C\u76EE\u56DB:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u4F4E\u6EAB"}),"\u8207",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u9AD8\u6EAB"}),"\u5206\u5225\u70BA\u591A\u5C11\uFF1F",u("br",{}),"\u4E14",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE"}),"\u70BA\u591A\u5C11\uFF1F",u("small",{className:"block",children:"(API: /v1/rest/datastore/F-D0047-089)"})]}),a(c.Answer,{title:"\u672A\u4F86\u4E00\u9031\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB:",className:"bg-[url('/src/assets/images/bg_snow.jpg')]",children:[u(g,{title:"\u6700\u4F4E\u6EAB",temp:n.value,time:n.dataTime}),u(g,{title:"\u6700\u9AD8\u6EAB",temp:s.value,time:s.dataTime}),u(g,{title:"\u55AE\u65E5\u6EAB\u5DEE\u6700\u5927",temp:r.diffTemp,time:r.date})]}),u(c.Answer,{title:"\u6700\u4F4E\u6EAB JSON",className:"bg-slate-900",children:h(n)}),u(c.Answer,{title:"\u6700\u9AD8\u6EAB JSON",className:"bg-slate-900",children:h(s)}),u(c.Answer,{title:"\u55AE\u65E5\u6EAB\u5DEE\u6700\u5927 JSON",className:"bg-slate-900",children:h(r)})]})}function ce(){return u("div",{className:"App",children:a("main",{className:N("flex flex-col","w-screen max-w-3xl","mx-auto my-16 space-y-6"),children:[u("h4",{className:"text-2xl font-black",children:"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566"}),u(K,{}),u(z,{}),u(ne,{}),u(ie,{})]})})}I.render(u(M.StrictMode,{children:u(ce,{})}),document.getElementById("root"));
