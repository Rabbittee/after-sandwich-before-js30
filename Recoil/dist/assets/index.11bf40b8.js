var C=Object.defineProperty,y=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(t,e,n)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d=(t,e)=>{for(var n in e||(e={}))T.call(e,n)&&w(t,n,e[n]);if(b)for(var n of b(e))O.call(e,n)&&w(t,n,e[n]);return t},h=(t,e)=>y(t,B(e));import{j as F,r as E,c as S,R as P,a as k}from"./vendor.2c825550.js";const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};v();const u=F.exports.jsx,o=F.exports.jsxs,p=F.exports.Fragment;function g({title:t,children:e}){return o("section",{className:"bg-white text-black text-opacity-70 rounded-2xl shadow-xl p-8",children:[u("h6",{className:"text-md font-black",children:t}),e]})}function R({title:t,children:e}){return u(g,{title:t,children:e})}function j({title:t="Answer:",children:e}){return u(g,{title:t,children:u("div",{className:"w-full p-4 text-black bg-slate-100 rounded-md outline-none my-2 text-opacity-70 text-sm  h-fit",children:e})})}var m={Question:R,Answer:j};const L="CWB-E8AC8336-9346-4D8A-A2D4-EB1934B7C25D";function I(t,e){if(!e)throw Error("Please type token of CWB");return async function(n,i){const r=new URLSearchParams(d({Authorization:e},i));return fetch(t+n+`?${r}`).then(s=>s.json())}}const x=I("https://opendata.cwb.gov.tw/api",L),N=(...t)=>e=>t.reduce((n,i)=>i(n),e),f=t=>e=>e.reduce(t),M=(t,e)=>n=>n.sort(e).slice(0,t),D=(t,e)=>{if(t!==null){const n=e.weather.TEMP,i=t.weather.TEMP;return Number(n)<Number(i)?e:t}return e};class V{constructor({locationName:e,lat:n,lon:i,weatherElement:r,time:s,parameter:l}){this.name=e,this.geoLocation={lat:n,lon:i},this.district=l.reduce((c,a)=>h(d({},c),{[a.parameterName]:["TOWN_SN","CITY_SN"].includes(a.parameterName)?Number(a.parameterValue):a.parameterValue}),{}),this.weather=r.reduce((c,a)=>h(d({},c),{[a.elementName]:Number(a.elementValue)}),{}),this.time=s}}class Q{constructor({locationName:e,lat:n,lon:i,weatherElement:r,time:s,parameter:l}){this.name=e,this.geoLocation={lat:n,lon:i},this.weather=r.reduce((c,a)=>h(d({},c),{[a.elementName]:{description:a.description,time:a.time}}),{}),this.time=s}}function A(t,e){const[n,i]=E.exports.useState(null);return E.exports.useEffect(()=>{x(t,e).then(r=>r.records.location.map(s=>new V(s))).then(r=>r.filter(s=>Number(s.weather.TEMP)!==-99)).then(r=>i(r))},[]),n}function _(t,e){const[n,i]=E.exports.useState(null);return E.exports.useEffect(()=>{x(t,e).then(r=>r.records.locations[0].location.map(s=>new Q(s))).then(r=>i(r))},[]),n}function $(){const t=A("/v1/rest/datastore/O-A0001-001",{elementName:["TEMP"]});if(!t)return u("div",{children:"loading"});const n=f(D)(t);return o(p,{children:[o(m.Question,{title:"\u984C\u76EE\u4E00:",children:["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),u("span",{className:"bg-blue-900 text-white",children:"\u884C\u653F\u5340"}),u("span",{className:"bg-blue-900 text-white",children:"\u6E2C\u7AD9\u540D\u7A31"}),u("span",{className:"bg-blue-900 text-white",children:"\u6EAB\u5EA6"}),u("span",{className:"bg-blue-900 text-white",children:"\u5EA7\u6A19"}),u("small",{className:"block",children:"(\u900F\u904E\u4E2D\u592E\u6C23\u8C61\u5C40\uFF21\uFF30\uFF29\u53D6\u5F97\u5168\u53F0\u6E2C\u7AD9\u5373\u6642\u8CC7\u6599)"}),u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(m.Answer,{title:"\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE",children:t.length!==0?JSON.stringify(n):"\u54A6!?\u6211\u7684\u7B54\u6848\u8DD1\u53BB\u54EA\u4E86"})]})}const J=(t,e)=>{const n=Math.ceil(e.weather.ELEV/500)*500,i=`${n-500}-${n}`;return t.hasOwnProperty(i)?(t[i].push(e),t):h(d({},t),{[i]:[e]})};function U(){const t=A("/v1/rest/datastore/O-A0001-001",{elementName:["ELEV","TEMP"]});if(!t)return u("div",{children:"loading"});const e=f(D),s=N(l=>l.sort((c,a)=>c.weather.ELEV-a.weather.ELEV),l=>l.reduce(J,{}),l=>Object.keys(l).reduce((c,a)=>h(d({},c),{[a]:e(l[a])}),{}))(t);return o(p,{children:[o(m.Question,{title:"\u984C\u76EE\u4E8C:",children:["\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF",u("span",{className:"bg-blue-900 text-white",children:"500m"}),"\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3object",u("small",{className:"block",children:"(API: v1/rest/datastore/O-A0001-001)"})]}),u(m.Answer,{children:u("ul",{children:Object.keys(s).map(l=>o("li",{children:[u("div",{children:l}),u("div",{children:JSON.stringify(s["0-500"])})]}))})})]})}const q=(t,e)=>{const n=e.district.CITY;return t.hasOwnProperty(n)?(t[n].push(e),t):d({[n]:[e]},t)};function H({name:t,weather:e}){return u("li",{children:o("div",{className:"shadow-md rounded-md py-2 flex flex-col justify-start bg-white bg-opacity-30",children:[u("h2",{className:"w-full text-md font-bold px-2",children:t}),u("span",{className:"w-full flex justify-center",children:e.HOUR_24})]})})}function W({name:t,stations:e}){return o("li",{children:[u("h4",{className:"text-lg font-bold",children:t}),u("ul",{className:"flex flex-row gap-x-2",children:e.map(H)})]})}function Y(){const t=A("/v1/rest/datastore/O-A0002-001",{elementName:["HOUR_24"]});if(!t)return u("div",{children:"loading"});const i=M(20,(s,l)=>l.weather.HOUR_24-s.weather.HOUR_24)(t).reduce(q,{}),r=Object.keys(i).map(s=>u(W,{name:s,stations:i[s]}));return o(p,{children:[o(m.Question,{title:"\u984C\u76EE\u4E09:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u8FD1",u("span",{className:"bg-blue-900 text-white",children:"24\u5C0F\u6642"}),"\u964D\u96E8\u91CF",u("span",{className:"bg-blue-900 text-white",children:"\u524D20\u540D"}),"\u662F\u54EA\u4E9B\uFF1F",u("br",{}),"\u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B",u("span",{className:"bg-blue-900 text-white",children:"\u7E23\u5E02"}),"\uFF1F",u("small",{className:"block",children:"HOUR_24\u6B04\u4F4D\u70BA\u8FD124\u5C0F\u6642\u7684\u7D2F\u7A4D\u964D\u96E8\u91CF"}),u("small",{className:"block",children:"(API: /v1/rest/datastore/O-A0002-001)"})]}),u(m.Answer,{title:"\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D:",children:u("div",{className:"w-full h-full bg-[url('/src/assets/images/q3_bg.jpeg')] rounded-md overflow-hidden",children:u("ul",{className:"flex flex-col gap-y-2  bg-cover px-4 py-2 filter backdrop-blur-md",children:r})})})]})}const K=t=>t.reduce((e,n)=>{const i=n.dataTime.slice(0,10),r=Number(n.elementValue[0].value);return e.hasOwnProperty(i)?(e[i].push(r),e):h(d({},e),{[i]:[r]})},{}),z=t=>t.map(([e,n])=>({date:e,diffTemp:Math.max(...n)-Math.min(...n)})),G=t=>f((e,n)=>e.diffTemp<n.diffTemp?n:e)(t);function X(){const t=_("/v1/rest/datastore/F-D0047-089",{locationName:["\u57FA\u9686\u5E02"],elementName:["T"]});if(!t)return u("div",{children:"loading"});const e=t[0].weather.T.time,n=f((s,l)=>s.elementValue[0].value>l.elementValue[0].value?s:l)(e),i=f((s,l)=>s.elementValue[0].value<l.elementValue[0].value?s:l)(e),r=N(K,Object.entries,z,G)(e);return o(p,{children:[o(m.Question,{title:"\u984C\u76EE\u56DB:\u683C\u5F0F\u81EA\u5DF1\u5B9A\u8FA3\uFF0C\u6211\u61F6",children:["\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u4F4E\u6EAB"}),"\u8207",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u9AD8\u6EAB"}),"\u5206\u5225\u70BA\u591A\u5C11\uFF1F",u("br",{}),"\u4E14",u("span",{className:"bg-blue-900 text-white",children:"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE"}),"\u70BA\u591A\u5C11\uFF1F",u("small",{className:"block",children:"(API: \u200B/v1\u200B/rest\u200B/datastore\u200B/F-D0047-089)"})]}),o(m.Answer,{title:"\u672A\u4F86\u4E00\u9031\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB:",children:[u("div",{children:`\u6700\u4F4E\u6EAB:${JSON.stringify(i)}\xB0C`}),u("div",{children:`\u6700\u9AD8\u6EAB:${JSON.stringify(n)}\xB0C`}),u("div",{children:`\u55AE\u65E5\u6EAB\u5DEE\u6700\u5927\u70BA:${JSON.stringify(r)}`})]})]})}function Z(){return u("div",{className:"App",children:o("main",{className:S("flex flex-col","w-screen max-w-3xl","mx-auto my-16 space-y-6"),children:[u("h4",{className:"text-2xl font-black",children:"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566"}),u($,{}),u(U,{}),u(Y,{}),u(X,{})]})})}P.render(u(k.StrictMode,{children:u(Z,{})}),document.getElementById("root"));
