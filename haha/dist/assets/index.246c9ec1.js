var I=Object.defineProperty;var D=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var E=(n,e,a)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,N=(n,e)=>{for(var a in e||(e={}))C.call(e,a)&&E(n,a,e[a]);if(D)for(var a of D(e))W.call(e,a)&&E(n,a,e[a]);return n};import{d as y,o as l,c as i,r as h,a as c,t as u,F as m,b as M,e as L,f as z,g as V,u as b,h as j,i as P}from"./vendor.40294bfe.js";const J=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};J();const q="CWB-3DDB77B5-643B-4E2D-B0AE-4218ADEB7C9F",K="https://opendata.cwb.gov.tw/api/v1/rest/datastore/",R={Headers:{Authorization:q}},O=y().add(1,"day").hour(0).minute(0).second(0).format("YYYY-MM-DDTHH:mm:ss"),U=y().add(2,"day").hour(23).minute(59).second(59).format("YYYY-MM-DDTHH:mm:ss");async function G(n,e){return await fetch(`${K}${n}?Authorization=${q}${e}`,R).then(a=>a.json())}const Q={props:{data:Object},setup(n){const e=n;return(a,o)=>(l(!0),i(m,null,h(e.data,(t,s)=>(l(),i("div",{key:s,class:"w-full h-auto bg-red-400 border-4"},[c("div",null,u(t.title),1),c("div",null,"\u57CE\u5E02: "+u(t.city),1),c("div",null,"\u5730\u5340: "+u(t.town),1),c("div",null,"\u6E2C\u7AD9: "+u(t.name),1),c("div",null,"\u6EAB\u5EA6: "+u(t.temp),1),c("div",null,"\u5EA7\u6A19: "+u(t.location),1)]))),128))}},X={props:{data:Object},setup(n){const e=n;return(a,o)=>(l(!0),i(m,null,h(e.data,t=>(l(),i(m,{key:t.city},[(l(!0),i(m,null,h(t.town,s=>(l(),i(m,{key:s.town},[(l(!0),i(m,null,h(s.location,r=>(l(),i("div",{key:r.elName,class:"w-full h-auto bg-red-400 border-4"},[c("div",null,"\u57CE\u5E02: "+u(t.city),1),c("div",null,"\u9109\u93AE: "+u(s.town),1),c("div",null,"\u6E2C\u7AD9: "+u(r.elName),1),c("div",null,"\u6EAB\u5EA6: "+u(r.elVal),1)]))),128))],64))),128))],64))),128))}},Z={key:0,class:"flex mx-5 my-2"},ee={class:"mr-2"},te=L("\u767C\u751F\u6642\u9593: "),ne={key:1,class:"flex mx-5 my-2"},ae={class:"mr-2"},oe=L("\u767C\u751F\u6642\u9593: "),se={class:"flex mx-5 my-2"},re={props:{data:Object},setup(n){const e=n;return(a,o)=>(l(),i(m,null,[e.data.H_temp?(l(),i("div",Z,[c("span",ee,"\u6700\u9AD8\u6EAB "+u(e.data.H_temp[0].temp),1),c("span",null,[te,(l(!0),i(m,null,h(e.data.H_temp,t=>(l(),i("span",{key:t.time,class:"mx-1"},u(t.time),1))),128))])])):M("",!0),e.data.L_temp?(l(),i("div",ne,[c("span",ae,"\u6700\u4F4E\u6EAB "+u(e.data.L_temp[0].temp),1),c("span",null,[oe,(l(!0),i(m,null,h(e.data.L_temp,t=>(l(),i("span",{key:t.time,class:"mx-1"},u(t.time),1))),128))])])):M("",!0),c("div",se,[c("span",null,"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE: "+u(e.data.today_temp),1)])],64))}},$=n=>Math.max(...n),v=n=>Math.min(...n),w=n=>n.map(e=>e.elementValue[0].value),B=n=>n.reduce((e,a)=>e+a),H=n=>n.filter(e=>e.weatherElement[3].elementValue!==String(-99)),A=(n,e)=>n.filter(a=>a.elementValue[0].value===String(e)),Y=(n,e,a)=>{const o=e===1?"":`${a*500} ~ ${(a+1)*500}\u516C\u5C3A`,t=n[0].parameter[0].parameterValue,s=n[0].parameter[2].parameterValue,r=n[0].locationName,d=v(n.map(p=>p.weatherElement[3].elementValue)),f={lon:n[0].lon,lat:n[0].lat};return{title:o,city:t,town:s,name:r,temp:d,location:f}};function le(n,e){const a=H(n),o=a.map(r=>r.weatherElement[3].elementValue),t=v(o),s=a.filter(r=>t===+r.weatherElement[3].elementValue);return N({},Y(s,e))}function ce(n,e,a={}){let o={};n.forEach(s=>{const r=s.weatherElement[0].elementValue,d=parseInt(r/500);o[d]||(o[d]=[]),o[d].push(s)});let t=0;for(;o[t];)a[t]=Y(H(o[t]),e,t),t++;return a}function ie(n){const a=n.sort((t,s)=>s.weatherElement[0].elementValue-t.weatherElement[0].elementValue).slice(0,20);let o=[];return a.forEach(t=>{const s=t.parameter[0].parameterValue,r=t.parameter[2].parameterValue,d=t.locationName,f=t.weatherElement[0].elementValue,p=o.findIndex(_=>_.city===s);if(p===-1)o.push({city:s,town:[{town:r,location:[{elName:d,elVal:f}]}]});else{const _=o[p].town.findIndex(g=>g.town===r);_===-1?o[p].town.push({town:r,location:[{elName:d,elVal:f}]}):o[p].town[_].location.push({elName:d,elVal:f})}}),Object.assign({},o)}function ue(n){const e=n.weatherElement[0].time,a=e.filter(x=>y(x.dataTime).get("date")===y(O).get("date")),o=e.filter(x=>y(x.dataTime).get("date")!==y(O).get("date")),[t,s,r,d,f,p]=[$(w(e)),v(w(e)),$(w(a)),v(w(a)),$(w(o)),v(w(o))],_=A(e,t),g=A(e,s),T=x=>x.map(k=>({time:k.dataTime,temp:k.elementValue[0].value})),[S,F]=[B([r,d]),B([f,p])];return{H_temp:T(_),L_temp:T(g),today_temp:S>F?f-p:r-d}}const de={props:{id:Number,src:String,parameter:String},setup(n){const e=n,a=z({data:{}});try{G(e.src,e.parameter).then(o=>{if(e.id===1)return a.data[0]=le(o.records.location,e.id);if(e.id===2)return a.data=ce(o.records.location,e.id);if(e.id===3)return a.data=ie(o.records.location,e.id);a.data=ue(o.records.locations[0].location[0],e.id)})}catch{console.log("ooops..api err")}return(o,t)=>e.id===1||e.id===2?(l(),V(Q,{key:0,data:b(a).data},null,8,["data"])):e.id===3?(l(),V(X,{key:1,data:b(a).data},null,8,["data"])):(l(),V(re,{key:2,data:b(a).data},null,8,["data"]))}},me={class:"card flex-col flex items-center"},pe={class:"text-left"},fe={class:"bg-blue-300 w-3/5 h-auto rounded-md my-2 shadow-xl"},he={props:{question:Object},setup(n){const e=["O-A0001-001","O-A0001-001","O-A0002-001","F-D0047-089"],a=["","","&elementName=HOUR_24",`&locationName=\u9AD8\u96C4\u5E02&elementName=T&sort=time&timeFrom=${O}&timeTo=${U}`];return(o,t)=>(l(),i("div",me,[c("span",pe,"\u554F\u984C "+u(n.question.id)+": "+u(n.question.item),1),c("div",fe,[j(de,{id:n.question.id,src:e[n.question.id-1],parameter:a[n.question.id-1]},null,8,["id","src","parameter"])])]))}},_e={class:"text-center"},ye=c("h2",{class:"mr-24 my-10 text-2xl"},"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566",-1),we={setup(n){const e=["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA \u7E23\u5E02 \u884C\u653F\u5340 \u6E2C\u7AD9\u540D\u7A31 \u6EAB\u5EA6 \u5EA7\u6A19","\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF500m\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3 object","\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D\u662F\u54EA\u4E9B\uFF1F \u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B\u7E23\u5E02\uFF1F","\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB\u5206\u5225\u70BA\u591A\u5C11\uFF1F\u4E14\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE\u70BA\u591A\u5C11\uFF1F"];return(a,o)=>(l(),i("div",_e,[ye,(l(),i(m,null,h(e,(t,s)=>j(he,{key:t.id,question:{id:s+1,item:t}},null,8,["question"])),64))]))}};P(we).mount("#app");
