import{d as T,r as z,o as i,c,a as g,b as r,t as u,F as h,e as A,f as B,g as j,h as P}from"./vendor.4d3b9db0.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))v(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&v(w)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function v(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}};K();const Y="CWB-3DDB77B5-643B-4E2D-B0AE-4218ADEB7C9F",R="https://opendata.cwb.gov.tw/api/v1/rest/datastore/",U={Headers:{Authorization:Y}},$=T().add(1,"day").hour(0).minute(0).second(0).format("YYYY-MM-DDTHH:mm:ss"),G=T().add(2,"day").hour(23).minute(59).second(59).format("YYYY-MM-DDTHH:mm:ss"),L=e=>Math.max(...e),O=e=>Math.min(...e),D=e=>e.map(t=>t.elementValue[0].value),S=e=>e.reduce((t,n)=>t+n),F=e=>e.filter(t=>t.weatherElement[3].elementValue!==String(-99)),I=(e,t)=>e.filter(n=>n.elementValue[0].value===String(t)),C=(e,t,n)=>{const v=t===1?"":`${n*500} ~ ${(n+1)*500}\u516C\u5C3A`,o=e[0].parameter[0].parameterValue,d=e[0].parameter[2].parameterValue,w=e[0].locationName,k=O(e.map(m=>m.weatherElement[3].elementValue)),M={lon:e[0].lon,lat:e[0].lat};return{title:v,city:o,town:d,name:w,temp:k,location:M}},Q={key:0,class:"flex mx-5 my-2"},X={class:"mr-2"},Z=B("\u767C\u751F\u6642\u9593: "),ee={key:1,class:"flex mx-5 my-2"},te={class:"mr-2"},ae=B("\u767C\u751F\u6642\u9593: "),ne={class:"flex mx-5 my-2"},oe={props:{id:Number,src:String,parameter:String},setup(e){const t=e,n={data:z({})};async function v(){(await fetch(`${R}${t.src}?Authorization=${Y}${t.parameter}`,U)).json().then(a=>o(a))}v();function o(m){if(t.id===1)return d(m.records.location);if(t.id===2)return w(m.records.location);if(t.id===3)return k(m.records.location);M(m.records.locations[0].location[0])}function d(m){const l=F(m),a=l.map(p=>p.weatherElement[3].elementValue),s=O(a),f=l.filter(p=>s===+p.weatherElement[3].elementValue);n.data.value[0]=C(f,t.id)}function w(m){let l={};m.forEach(s=>{const f=s.weatherElement[0].elementValue,p=parseInt(f/500);l[p]||(l[p]=[]),l[p].push(s)});let a=0;for(;l[a];)n.data.value[a]=C(F(l[a]),t.id,a),a++}function k(m){const a=m.sort((f,p)=>p.weatherElement[0].elementValue-f.weatherElement[0].elementValue).slice(0,20);let s=[];a.forEach(f=>{const p=f.parameter[0].parameterValue,y=f.parameter[2].parameterValue,_=f.locationName,V=f.weatherElement[0].elementValue,x=s.findIndex(b=>b.city===p);if(x===-1)s.push({city:p,town:[{town:y,location:[{elName:_,elVal:V}]}]});else{const b=s[x].town.findIndex(N=>N.town===y);b===-1?s[x].town.push({town:y,location:[{elName:_,elVal:V}]}):s[x].town[b].location.push({elName:_,elVal:V})}}),n.data.value=Object.assign({},s)}function M(m){const l=m.weatherElement[0].time,a=l.filter(E=>T(E.dataTime).get("date")===T($).get("date")),s=l.filter(E=>T(E.dataTime).get("date")!==T($).get("date")),[f,p,y,_,V,x]=[L(D(l)),O(D(l)),L(D(a)),O(D(a)),L(D(s)),O(D(s))],b=I(l,f),N=I(l,p),q=E=>E.map(H=>({time:H.dataTime,temp:H.elementValue[0].value})),[J,W]=[S([y,_]),S([V,x])];n.data.value={H_temp:q(b),L_temp:q(N),today_temp:J>W?V-x:y-_}}return(m,l)=>t.id===2||t.id===1?(i(!0),c(h,{key:0},g(n.data.value,(a,s)=>(i(),c("div",{key:s,class:"w-full h-auto bg-red-400 border-4"},[r("div",null,u(a.title),1),r("div",null,"\u57CE\u5E02: "+u(a.city),1),r("div",null,"\u5730\u5340: "+u(a.town),1),r("div",null,"\u6E2C\u7AD9: "+u(a.name),1),r("div",null,"\u6EAB\u5EA6: "+u(a.temp),1),r("div",null,"\u5EA7\u6A19: "+u(a.location),1)]))),128)):t.id===3?(i(!0),c(h,{key:1},g(n.data.value,(a,s)=>(i(),c(h,{key:s},[(i(!0),c(h,null,g(a.town,(f,p)=>(i(),c(h,{key:p},[(i(!0),c(h,null,g(f.location,(y,_)=>(i(),c("div",{key:_,class:"w-full h-auto bg-red-400 border-4"},[r("div",null,"\u57CE\u5E02: "+u(a.city),1),r("div",null,"\u9109\u93AE: "+u(f.town),1),r("div",null,"\u6E2C\u7AD9: "+u(y.elName),1),r("div",null,"\u6EAB\u5EA6: "+u(y.elVal),1)]))),128))],64))),128))],64))),128)):(i(),c(h,{key:2},[n.data.value.H_temp?(i(),c("div",Q,[r("span",X,"\u6700\u9AD8\u6EAB "+u(n.data.value.H_temp[0].temp),1),r("span",null,[Z,(i(!0),c(h,null,g(n.data.value.H_temp,(a,s)=>(i(),c("span",{key:s,class:"mx-1"},u(a.time),1))),128))])])):A("",!0),n.data.value.L_temp?(i(),c("div",ee,[r("span",te,"\u6700\u4F4E\u6EAB "+u(n.data.value.L_temp[0].temp),1),r("span",null,[ae,(i(!0),c(h,null,g(n.data.value.L_temp,(a,s)=>(i(),c("span",{key:s,class:"mx-1"},u(a.time),1))),128))])])):A("",!0),r("div",ne,[r("span",null,"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE: "+u(n.data.value.today_temp),1)])],64))}},se={class:"card flex-col flex items-center"},re={class:"text-left"},le={class:"bg-blue-300 w-3/5 h-auto rounded-md my-2 shadow-xl"},ie={props:{question:Object},setup(e){const t=["O-A0001-001","O-A0001-001","O-A0002-001","F-D0047-089"],n=["","","&elementName=HOUR_24",`&locationName=\u9AD8\u96C4\u5E02&elementName=T&sort=time&timeFrom=${$}&timeTo=${G}`];return(v,o)=>(i(),c("div",se,[r("span",re,"\u554F\u984C "+u(e.question.id)+": "+u(e.question.item),1),r("div",le,[j(oe,{id:e.question.id,src:t[e.question.id-1],parameter:n[e.question.id-1]},null,8,["id","src","parameter"])])]))}},ce={class:"text-center"},de=r("h2",{class:"mr-24 my-10 text-2xl"},"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566",-1),ue={setup(e){const t=["\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA \u7E23\u5E02 \u884C\u653F\u5340 \u6E2C\u7AD9\u540D\u7A31 \u6EAB\u5EA6 \u5EA7\u6A19","\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF500m\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3 object","\u8FD124\u5C0F\u6642\u964D\u96E8\u91CF\u524D20\u540D\u662F\u54EA\u4E9B\uFF1F \u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B\u7E23\u5E02\uFF1F","\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684\u6700\u4F4E\u6EAB\u8207\u6700\u9AD8\u6EAB\u5206\u5225\u70BA\u591A\u5C11\uFF1F\u4E14\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE\u70BA\u591A\u5C11\uFF1F"];return(n,v)=>(i(),c("div",ce,[de,(i(),c(h,null,g(t,(o,d)=>j(ie,{key:o.id,question:{id:d+1,item:o}},null,8,["question"])),64))]))}};P(ue).mount("#app");
