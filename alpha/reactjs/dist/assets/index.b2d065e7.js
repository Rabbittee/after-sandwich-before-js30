var $=Object.defineProperty,U=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var O=(t,n,u)=>n in t?$(t,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[n]=u,m=(t,n)=>{for(var u in n||(n={}))v.call(n,u)&&O(t,u,n[u]);if(F)for(var u of F(n))P.call(n,u)&&O(t,u,n[u]);return t},x=(t,n)=>U(t,W(n));var k=(t,n)=>{var u={};for(var r in t)v.call(t,r)&&n.indexOf(r)<0&&(u[r]=t[r]);if(t!=null&&F)for(var r of F(t))n.indexOf(r)<0&&P.call(t,r)&&(u[r]=t[r]);return u};import{R as e,r as f,d as H,a as V,b as C,u as _,c as q,L as z,e as J,f as K,B as Y}from"./vendor.792849f0.js";const G=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function u(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=u(a);fetch(a.href,l)}};G();function X(){return e.createElement(e.Fragment,null,e.createElement("h6",{className:"text-md font-black text-green-500"},"\u984C\u76EE\u4E00:"),e.createElement("p",{className:"py-2 my-2"},"\u627E\u5230\u5168\u53F0\u7576\u4E0B\u6700\u4F4E\u6EAB\u7684\u9EDE\uFF0C\u4E26\u5217\u51FA",e.createElement("span",{className:"hint"},"\u7E23\u5E02"),e.createElement("span",{className:"hint"},"\u884C\u653F\u5340"),e.createElement("span",{className:"hint"},"\u6E2C\u7AD9\u540D\u7A31"),e.createElement("span",{className:"hint"},"\u6EAB\u5EA6"),e.createElement("span",{className:"hint"},"\u5EA7\u6A19")),e.createElement("small",{className:"block"},"(\u900F\u904E\u4E2D\u592E\u6C23\u8C61\u5C40API\u53D6\u5F97\u5168\u53F0\u6E2C\u7AD9\u5373\u6642\u8CC7\u6599)"),e.createElement("small",{className:"block"},"(API: v1/rest/datastore/O-A0001-001 or v1/rest/datastore/O-A0003-001)"))}function Z(){return e.createElement(e.Fragment,null,e.createElement("h6",{className:"text-md font-black text-green-500"},"\u984C\u76EE\u4E8C:"),e.createElement("p",{className:"my-2"},"\u540C\u4E0A\uFF0C\u91DD\u5C0D\u4E0D\u540C\u6D77\u62D4\u9AD8\u5EA6\u627E\u51FA\u6700\u4F4E\u6EAB\u6E2C\u7AD9\uFF0C\u6BCF",e.createElement("span",{className:"hint"},"500m"),"\u4E00\u7D44\uFF0C\u4E26\u56DE\u50B3object"),e.createElement("small",{className:"block"},"(API: v1/rest/datastore/O-A0001-001 or v1/rest/datastore/O-A0003-001)"))}function ee(){return e.createElement(e.Fragment,null,e.createElement("h6",{className:"text-md font-black text-green-500"},"\u984C\u76EE\u4E09:"),e.createElement("p",{className:"my-2 space-y-2"},"\u8FD1",e.createElement("span",{className:"hint"},"24\u5C0F\u6642"),"\u964D\u96E8\u91CF",e.createElement("span",{className:"hint"},"\u524D20\u540D"),"\u662F\u54EA\u4E9B\uFF1F",e.createElement("br",null),"\u5206\u5225\u7D71\u8A08\u6574\u7406\u5217\u5728\u54EA\u4E9B",e.createElement("span",{className:"hint"},"\u7E23\u5E02"),"\uFF1F"),e.createElement("small",{className:"block"},"HOUR_24\u6B04\u4F4D\u70BA\u8FD124\u5C0F\u6642\u7684\u7D2F\u7A4D\u964D\u96E8\u91CF"),e.createElement("small",{className:"block"},"(API: /v1/rest/datastore/O-A0002-001)"))}function te(){return e.createElement(e.Fragment,null,e.createElement("h6",{className:"text-md font-black text-green-500"},"\u984C\u76EE\u56DB:"),"\u81EA\u5DF1\u6240\u5728\u7684\u7E23\u5E02\uFF0C\u672A\u4F86\u5169\u5929\u7684",e.createElement("span",{className:"hint"},"\u6700\u4F4E\u6EAB"),"\u8207",e.createElement("span",{className:"hint"},"\u6700\u9AD8\u6EAB"),"\u5206\u5225\u70BA\u591A\u5C11\uFF1F",e.createElement("br",null),"\u4E14",e.createElement("span",{className:"hint"},"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE"),"\u70BA\u591A\u5C11\uFF1F",e.createElement("small",{className:"block"},"(API:/v1/rest/datastore/F-D0047-089)"))}const B="TEMP",y="CITY",N="TOWN",M="ELEV",T="HOUR_24",ne="\u65B0\u5317\u5E02",I="T",ae=-99,re=t=>n=>{const u=t==null?void 0:t.reduce((r,{parameterName:a,parameterValue:l})=>a===y?x(m({},r),{city:l}):a===N?x(m({},r),{twon:l}):r,{});return m(m({},n),u)},L=t=>n=>{const u=t==null?void 0:t.reduce((r,{elementName:a,elementValue:l,time:s})=>a===B?x(m({},r),{temp:Number(l)}):a===M?x(m({},r),{elev:Number(l)}):a===T?x(m({},r),{rain:Number(l)}):a===I?x(m({},r),{tempInTime:s}):r,{});return m(m({},n),u)},R=t=>t.temp===ae?!1:t,j=(...t)=>n=>t.reduce((u,r)=>r(u),n),ue=(t,n)=>{const{parameter:u,weatherElement:r}=n,a=j(re(u),L(r),R)(n);return a?[...t,a]:t},le=(t,n)=>{const{weatherElement:u}=n,r=j(L(u),R)(n);return r?[...t,r]:t};async function w(t,n,u=!1){const r=m({Authorization:"CWB-34AC2BFB-2272-41E3-84FE-AAF40C0C42AA"},n),a=new URLSearchParams(r);try{const l=await fetch(`https://opendata.cwb.gov.tw/api/v1/rest/datastore/${t}?${a}`);if(u){const{records:s}=await l.json();return s.locations[0].location.reduce(le,[])}else{const{records:{location:s}}=await l.json();return s.reduce(ue,[])}}catch(l){throw new Error(l)}}function se(){const t="O-A0001-001",[n,u]=f.exports.useState({}),r={parameterName:[y,N],elementName:B};return f.exports.useEffect(()=>{(async()=>{const s=(await w(t,r)).reduce((h,i)=>h.temp>i.temp?i:h),{locationName:p,lat:o,lon:c,temp:E,city:d,town:A}=s;u({lat:o,lon:c,name:p,temp:E,city:d,town:A})})()},[]),e.createElement("div",{className:" flex flex-col rounded-xl px-4 py-2 my-3 shadow bg-white text-green-600"},e.createElement("p",null,n.name),e.createElement("p",null,n.temp,"\xB0C"),e.createElement("p",null,n.city),e.createElement("p",null,n.town))}function ce(){const t="O-A0001-001",[n,u]=f.exports.useState([]),r={parameterName:[y,N],elementName:[M,B]};return f.exports.useEffect(()=>{(async()=>{const s=(await w(t,r)).reduce((p,o)=>{const{temp:c,elev:E,locationName:d,city:A,town:h}=o,i=(Math.floor(E/500)+1)*500,{[i]:D}=p,Q=(D==null?void 0:D.temp)<c?D:{name:d,temp:c,city:A,town:h,elev:E};return x(m({},p),{[i]:Q})},{});u([...Object.entries(s)])})()},[]),e.createElement("div",{className:" flex flex-col rounded-xl px-4 py-2 my-3 shadow bg-white text-green-600 max-h-96 overflow-y-scroll "},n.map(([a,l])=>e.createElement("ul",{key:a},e.createElement("li",{className:"p-4"},e.createElement("h4",{className:"text-emerald-800 text-xl p-2"},"\u6D77\u62D4\u7BC4\u570D:",a-500,"-",a),e.createElement("ul",{key:l.name,className:"bg-green-600 text-white rounded-md p-2"},e.createElement("li",null,"\u6D77\u62D4:",l.elev),e.createElement("li",null,l.city,"-",l.name),e.createElement("li",null,"\u6EAB\u5EA6:",l.temp))))))}function oe(){const t="O-A0002-001",[n,u]=f.exports.useState([]),r={parameterName:[y,N],elementName:[T]};return f.exports.useEffect(()=>{(async()=>{const p=(await w(t,r)).sort((o,c)=>c.rain-o.rain).slice(0,20).reduce((o,c)=>{const{city:E}=c;return o[E]||(o[E]=[]),o[E].push(c),o},{});u([...Object.entries(p)])})()},[]),e.createElement("div",{className:" flex flex-col rounded-xl px-4 py-2 my-3 shadow bg-white text-green-600 max-h-96 overflow-y-scroll "},n.map(([a,l])=>e.createElement("ul",{key:a,className:"p-4"},e.createElement("h4",{className:"text-emerald-800 text-2xl py-2"},a),l.map((s,p)=>e.createElement("li",{key:p,className:"p-4 bg-green-600 text-white rounded-md my-2"},e.createElement("p",null,"\u89C0\u6E2C\u7AD9:",s.locationName," ",s.stationId),e.createElement("p",null,"\u964D\u96E8\u91CF:",s.rain))))))}function me(){const t="F-D0047-089",[n,u]=f.exports.useState({}),r=o=>H(o).format("MMDD"),a={parameterName:[y,N],elementName:I,locationName:ne,sort:"time"},l=o=>Object.entries(o.reduce((c,E)=>{const d=r(E.dataTime);return c[d]===void 0?c[d]=[]:c[d].push(Number(E.elementValue[0].value)),c},{})),s=o=>{const c=Math.max(...o),E=Math.min(...o);return{diff:c-E}},p=async()=>{const[o]=await w(t,a,!0),{tempInTime:c}=o,E=l(c).map(([i,D])=>m(m({},i),s(D))).map(i=>i.diff),d=Math.max(...c.map(i=>i.elementValue[0].value)),A=Math.min(...c.map(i=>i.elementValue[0].value)),h=Math.max(...E);u({maxTemp:d,minTemp:A,maxDiff:h})};return f.exports.useEffect(()=>{p()},[]),e.createElement("div",{className:" flex flex-col rounded-xl px-4 py-2 my-3 shadow bg-white text-green-600"},e.createElement("p",null,"\u6700\u9AD8\u6EAB:",e.createElement("span",{className:"text-xl font-bold"},n.maxTemp),"\xB0C"),e.createElement("p",null,"\u6700\u4F4E\u6EAB:",e.createElement("span",{className:"text-xl font-bold"},n.minTemp),"\xB0C"),e.createElement("p",null,"\u6700\u5927\u55AE\u65E5\u6EAB\u5DEE:",e.createElement("span",{className:"text-xl font-bold"},n.maxDiff),"\xB0C"))}function g({children:t}){return e.createElement("section",{className:"bg-green-100 text-slate-600  text-opacity-75 rounded-2xl shadow-xl p-8"},t)}function Ee({children:t}){return e.createElement("main",{className:"w-screen max-w-3xl flex flex-col mx-auto my-16 space-y-6 px-4"},e.createElement("h4",{className:"text-2xl font-black text-emerald-800"},"JS\u8B80\u66F8\u6703\u5F8C\u6E2C\u5566"),t)}function ie(){return e.createElement(g,null,e.createElement(X,null),e.createElement(se,null))}function pe(){return e.createElement(g,null,e.createElement(Z,null),e.createElement(ce,null))}function de(){return e.createElement(g,null,e.createElement(ee,null),e.createElement(oe,null))}function fe(){return e.createElement(g,null,e.createElement(te,null),e.createElement(me,null))}function b(r){var a=r,{children:t,to:n}=a,u=k(a,["children","to"]);let l=_(n),s=q({path:l.pathname,end:!0});return e.createElement("div",null,e.createElement(z,m({className:J(s?"text-white bg-green-500 ":"text-gray-500","px-4 py-1 rounded-md"),to:n},u),t))}function xe(){return e.createElement(Ee,null,e.createElement("nav",{className:"flex space-x-2"},e.createElement(b,{to:"/"},"Part1"),e.createElement(b,{to:"/part2"},"Part2"),e.createElement(b,{to:"/part3"},"Part3"),e.createElement(b,{to:"/part4"},"Part4")),e.createElement(V,null,e.createElement(C,{index:!0,element:e.createElement(ie,null),exact:!0}),e.createElement(C,{path:"/part2",element:e.createElement(pe,null)}),e.createElement(C,{path:"/part3",element:e.createElement(de,null)}),e.createElement(C,{path:"/part4",element:e.createElement(fe,null)})))}const S=document.getElementById("root");if(!S)throw new Error("should include #root element in your html document.");K.createRoot(S).render(e.createElement(f.exports.StrictMode,null,e.createElement(Y,null,e.createElement(xe,null))));
